\tikzstyle{ipe stylesheet} = [
  ipe import,
  even odd rule,
  line join=round,
  line cap=butt,
  ipe pen normal/.style={line width=0.4},
  ipe pen heavier/.style={line width=0.8},
  ipe pen fat/.style={line width=1.2},
  ipe pen ultrafat/.style={line width=2},
  ipe pen normal,
  ipe mark normal/.style={ipe mark scale=3},
  ipe mark large/.style={ipe mark scale=5},
  ipe mark small/.style={ipe mark scale=2},
  ipe mark tiny/.style={ipe mark scale=1.1},
  ipe mark normal,
  /pgf/arrow keys/.cd,
  ipe arrow normal/.style={scale=7},
  ipe arrow large/.style={scale=10},
  ipe arrow small/.style={scale=5},
  ipe arrow tiny/.style={scale=3},
  ipe arrow normal,
  /tikz/.cd,
  ipe arrows, % update arrows
  <->/.tip = ipe normal,
  ipe dash normal/.style={dash pattern=},
  ipe dash dashed/.style={dash pattern=on 4bp off 4bp},
  ipe dash dotted/.style={dash pattern=on 1bp off 3bp},
  ipe dash dash dotted/.style={dash pattern=on 4bp off 2bp on 1bp off 2bp},
  ipe dash dash dot dotted/.style={dash pattern=on 4bp off 2bp on 1bp off 2bp on 1bp off 2bp},
  ipe dash normal,
  ipe node/.append style={font=\normalsize},
  ipe stretch normal/.style={ipe node stretch=1},
  ipe stretch normal,
  ipe opacity 10/.style={opacity=0.1},
  ipe opacity 30/.style={opacity=0.3},
  ipe opacity 50/.style={opacity=0.5},
  ipe opacity 75/.style={opacity=0.75},
  ipe opacity opaque/.style={opacity=1},
  ipe opacity opaque,
]
\definecolor{red}{rgb}{1,0,0}%
\begin{tikzpicture}[ipe stylesheet]
  \draw[shift={(307.397, 566.186)}, xscale=0.2262, yscale=0.0959]
    (0, 0)
     .. controls (10.6667, 26.6667) and (58.6667, 74.6667) .. (109.3333, 69.3333)
     .. controls (160, 64) and (213.3333, 5.3333) .. (234.6667, -50.6667)
     .. controls (256, -106.6667) and (245.3333, -160) .. (208, -200)
     .. controls (170.6667, -240) and (106.6667, -266.6667) .. (88, -248)
     .. controls (69.3333, -229.3333) and (96, -165.3333) .. (96, -122.6667)
     .. controls (96, -80) and (69.3333, -58.6667) .. (42.6667, -45.3333)
     .. controls (16, -32) and (-10.6667, -26.6667) .. cycle;
  \pic
     at (335.3985, 560.6362) {ipe disk};
  \draw[shift={(335.398, 560.636)}, scale=0.1686, -{>[ipe arrow small]}]
    (0, 0)
     .. controls (48, 16) and (112, -48) .. (158.005, -9.169);
  \pic
     at (362.0336, 559.0905) {ipe disk};
  \node[ipe node]
     at (80, 588) {$p(\vec x, \vec z)$};
  \node[ipe node]
     at (80, 528) {$q(\vec z |\vec\nu)$};
  \draw[shift={(128, 576)}, xscale=1.25, ipe pen fat]
    (0, 0) rectangle (64, -32);
  \node[ipe node]
     at (136.891, 557.511) {$\displaystyle \int (...) q(\vec z|\vec
       \nu) d\vec z$};
  \node[ipe node]
     at (249.371, 557.339) {$\nabla_{\vec\nu}$};
  \draw[ipe pen fat]
    (240, 576) rectangle (272, 544);
  \draw[->]
    (208, 560)
     -- (240, 560);
  \draw[->]
    (272, 560)
     -- (304, 560);
  \draw[->]
    (108, 536)
     -- (128, 544);
  \draw[->]
    (108, 584)
     -- (128, 576);
  \node[ipe node, font=\tiny]
     at (240, 526.47) {\it \sffamily Adopted from Blei et al.'s NIPS-2016 tutorial};
\end{tikzpicture}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../lecture_variational_inference"
%%% End:
